<template>
    <lightning-card>
        <lightning-button label="Create New Item" slot="actions"  onclick={openmodal}></lightning-button>
        <lightning-button label="Refresh Data" slot="actions" onclick={refreshData}></lightning-button>
        <template if:true={error}>
            Error:
            <p>{error}</p>
        </template>
    </lightning-card>
    <template if:true={items}>
        <template for:each={items} for:item="item">
            <c-item key={item.Id} item={item} settings={settings} onrefreshdata={refreshData} onupdateitemevent={updateItemEventHandler} onnewitemactionevent={newItemActionEventHandler}></c-item>
        </template>
    </template>
    <c-modal header="Create Item"  onclosedialog={handleCancelModal}>
        <div slot="header">
            <lightning-button
                label="Create Item"
                variant="neutral"
                onclick={handleCreateItem}
            ></lightning-button>
            <lightning-button
                label="Close"
                variant="brand"
                onclick={handleCancelModal}
            ></lightning-button>
        </div>
        <c-item-create location={location} onitemcreated={onItemCreated}></c-item-create>

        <div slot="footer">
            <lightning-button
                label="Create Item"
                variant="neutral"
                onclick={handleCreateItem}
            ></lightning-button>
            <lightning-button
                label="Close"
                variant="brand"
                onclick={handleCancelModal}
            ></lightning-button>
        </div>
    </c-modal>
    
</template>